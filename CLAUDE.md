# INTEGRAL MVP - 개발 가이드

## 프로젝트 개요

- **프로젝트명**: INTEGRAL
- **목적**: 제주 물류 공유 플랫폼 - 공간과 경로를 상품화하는 공유 물류 서비스
- **버전**: MVP v3.0 (설득용 시연 목적)

> **핵심**: 투자자/이해관계자에게 3-5분 내 서비스 가치를 전달하는 프로토타입
> 백엔드/데이터베이스 없음, 모든 데이터는 mockData 기반

---

## 기술 스택

- **프레임워크**: Vite + React + TypeScript
- **스타일링**: Tailwind CSS
- **지도**: Mapbox GL JS (light-v11)
- **폰트**: Pretendard (메인), Inter (숫자)

```env
VITE_MAPBOX_ACCESS_TOKEN=your_mapbox_token_here
```

---

## 핵심 설계 원칙

1. **직관성 우선** - 별도 설명 없이 화면만으로 서비스 이해 가능
2. **지도 중심 UI** - 모든 가치는 지도에서 시각적으로 전달
3. **싱글 페이지 구조** - 별도 라우팅 없이 모달로 모든 정보 접근
4. **더미 데이터 기반** - 백엔드 없음, 모든 데이터는 mockData에서 관리
5. **룰 기반 로직** - 복잡한 알고리즘 대신 단순 조건문 기반

---

## 통합 엔진 설계 (불변 규칙)

### Cube 단일 내부 계산 단위

```
┌─────────────────────────────────────────────────────────┐
│  Cube = 250×250×250mm (0.015625 m³)                    │
│  - 모든 내부 계산의 유일한 단위                          │
│  - Pallet은 검색/매칭 기준에 사용하지 않음               │
└─────────────────────────────────────────────────────────┘
```

### 환산 비율

| 관계 | 비율 |
|------|------|
| 1 Pallet = N Cubes | **cubesPerPallet = 128** |
| 1 Pallet 바닥면적 | 1.21 m² (1.1m × 1.1m) |
| 1 Pallet 체적 | 2.178 m³ (1.1 × 1.1 × 1.8m) |

### 거래 단위

| 서비스 | 거래 단위 | 내부 계산 단위 |
|--------|----------|---------------|
| 보관 (Storage) | **Pallet** | Cube |
| 운송 (Route) | **Cube** | Cube |

### 포장 모듈의 역할

```
┌─────────────────────────────────────────────────────────┐
│  포장 모듈 = "형상 검증 + 표준 분류" (계산 중심 아님)     │
│  - 소형(8분할): 550×275mm                               │
│  - 중형(6분할): 550×366mm                               │
│  - 대형(4분할): 650×450mm                               │
│  - 분류 버퍼: ±10mm (절대값), 90도 회전 허용            │
└─────────────────────────────────────────────────────────┘
```

---

## 프로젝트 구조

```
src/
├── engine/                    # 플랫폼 통합 엔진 (순수 함수만)
├── components/
│   ├── Layout/
│   │   ├── CommandLayout.tsx
│   │   └── ServiceConsole/   # 3행 그리드 레이아웃 UI
│   │       ├── ServiceConsole.tsx
│   │       ├── sections/     # StorageTab, TransportTab, BothTab
│   │       ├── ui/           # GridCell, InputModal, CargoSummaryCard 등
│   │       └── hooks/        # useServiceConsoleState
│   ├── Map/MapboxContainer/
│   ├── visualizations/
│   ├── common/
│   ├── deal/
│   ├── routes/
│   └── storages/
├── assets/icons/console/     # 입력칸 아이콘 (SVG)
├── types/models.ts
├── styles/fonts.css
└── data/mockData.ts
```

---

## ServiceConsole UI 설계 (PR3-3)

### 3행 그리드 레이아웃

```
┌─────────────────────────────────────────────┐
│  grid-rows-[1.35fr_1fr_1fr] h-full          │
├─────────────────────────────────────────────┤
│  1행: 화물 정보 | 물량 정보 (확장 높이)       │
│  2행: 보관장소 / 출발지↔도착지              │
│  3행: 시작일|종료일 / 운송날짜              │
└─────────────────────────────────────────────┘
```

### GridCell 컴포넌트

- `h-full` 기반 (픽셀 고정 X) → 탭 영역 자동 채움
- `min-h-0` 적용으로 overflow 방지
- 아이콘 이미지 사용 (`icon` prop)
- 보더: `border-slate-400`, 호버 시 `border-slate-600`

### 아이콘 타입

| 아이콘 | 용도 |
|--------|------|
| cargo | 화물 정보 |
| volume | 물량 정보 |
| location | 보관 장소 |
| calendar | 시작일/종료일/운송날짜 |
| origin | 출발지 |
| destination | 도착지 |

---

## 디자인 시스템

### 플랫폼 상징 컬러: Navy Blue (blue-900)

| 요소 | 컬러 |
|------|------|
| 헤더 로고 INTEGRAL | `text-blue-900` |
| 탭 Active | `text-blue-900`, `border-blue-900` |
| 검색 버튼 | `from-blue-800 to-blue-900` |
| 모달 헤더 | `bg-blue-900` |
| 확인 버튼 | `bg-blue-900 hover:bg-blue-950` |
| 쌍방향 화살표 | `text-blue-900` |

### 지도 요소

| 요소 | 색상 |
|------|------|
| 지도 배경 | Mapbox light-v11 |
| 공간 상품 마커 | #ff6b35 (주황색) |
| 도내 경로 | #3b82f6 (파란색, 실선) |
| 입도 경로 | #10b981 (녹색, 점선) |
| 출도 경로 | #a855f7 (보라색, 점선) |

---

## 제약사항

### 절대 구현하지 말 것
- 로그인/회원가입, 실제 결제, 백엔드/DB
- 별도 페이지 라우팅, 실시간 데이터, 실제 거래

### 허용되는 범위
- 더미 데이터 기반 UI, 모달 상세, 룰 기반 매칭, 더미 비용 계산

---

## 코드 컨벤션

### 폴더 규칙

| 위치 | 용도 |
|------|------|
| `components/common/` | 공용 컴포넌트 (2곳 이상 사용) |
| `{feature}/ui/` | Feature 내부 UI |
| `{feature}/sections/` | 화면 섹션 |
| `{feature}/hooks/` | 상태/로직 훅 |

### 가드레일

- 컴포넌트: 200줄 목표, 최대 300줄
- JSX 내부 계산/변환 로직 **금지** → `engine/` 또는 `utils/` 사용
- `engine/`에는 순수 함수만 (React import 금지)

### 작업 청소 규칙

작업 종료 시 반드시 수행:
- 미사용 파일/컴포넌트/export 삭제
- dead code 제거, import 정리

---

## PR 로드맵

| PR | 내용 | 상태 |
|----|------|------|
| PR1~PR3-2.5 | 초기 설정, UI 개편, 통합 엔진, 구조 리팩토링 | ✅ 완료 |
| PR3-3 | ServiceConsole 3행 그리드 UI + Navy blue 통일 | ✅ 완료 |
| PR4 | 검색 매칭 + 지도 연동 | 📋 예정 |
| PR5 | 거래 모달 + 규정 매칭 | 📋 예정 |
| PR6 | 마무리 + 최적화 | 📋 예정 |

---

**최종 수정**: 2025.01.26 (PR3-3 ServiceConsole UI 재설계 완료)
